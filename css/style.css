/* css/style.css - Limpo e Consolidado (v3 - Layout Fix) */

/* --- Variáveis Globais --- */
:root {
    --background-color: #2c3e50;
    --primary-color: #3498db;
    --secondary-color: #2980b9;
    --accent-color: #e74c3c;
    --text-color: #ecf0f1;
    --text-color-secondary: #bdc3c7; /* Added for less important text */
    --text-color-subtle: #95a5a6;     /* Added for even more subtle text */
    --border-color: #4a637a;
    --border-color-light: #5f7e9b; /* Lighter border for items like news */
    --card-background: #7f8c8d;
    --zone-background: rgba(0, 0, 0, 0.25); /* Slightly darker zone */
    --panel-background: rgba(20, 30, 40, 0.85); /* Darker, less blue panel */
    --highlight-color: yellow;
    --disabled-color: #95a5a6;
    --valid-color: #2ecc71;    /* Brighter green */
    --invalid-color: #e74c3c; /* Same as accent */
    --error-color: #e74c3c;     /* Same as accent */
    --success-color: #2ecc71;   /* Brighter green */

    --title-color: #e0eaf1; /* Lighter color for main titles */
    --button-play-bg: #28a745; /* Verde */
    --button-play-text: #fff;
    --button-play-border: #1f7a34;
    --button-play-hover-bg: #218838;
    --button-secondary-bg: #6c757d;
    --button-secondary-hover-bg: #5a6268;
    --accent-color-light: #66d9ef; /* Ciano claro para títulos/destaques */

    --card-width-battle: 100px;
    --card-height-battle: 140px;
    --card-width-mini: 80px;
    --card-height-mini: 112px;

    --top-bar-height: 55px;    /* Slightly reduced Top Bar height */
}

/* --- Reset Básico & Estilos Gerais --- */
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

/* --- CORE LAYOUT FIX: Set base heights --- */
html, body {
    height: 100%;
    width: 100%;
    overflow: hidden; /* Prevent body scroll */
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: var(--background-color);
    color: var(--text-color);
    position: relative; /* Needed for absolute positioning of screens */
    line-height: 1.4;
}

h1, h2, h3 {
    color: var(--primary-color);
    margin-bottom: 15px;
    text-align: center;
    font-weight: 600;
    text-transform: uppercase;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); /* Slightly softer shadow */
}
h2 { font-size: 1.7em; } /* Slightly adjusted sizes */
h3 { font-size: 1.25em; color: var(--secondary-color); }

button {
    padding: 10px 15px;
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.1s ease;
    font-size: 1em;
    font-weight: 500;
    outline: none;
}
button:hover:not(:disabled) {
    background-color: var(--secondary-color);
    transform: translateY(-1px);
}
button:active:not(:disabled) {
    transform: translateY(0px);
}
button:disabled {
    background-color: var(--disabled-color);
    cursor: not-allowed;
    opacity: 0.6;
}

input[type="text"],
input[type="password"],
select {
    padding: 8px 12px;
    border: 1px solid var(--border-color);
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--text-color);
    border-radius: 4px;
    margin-bottom: 10px;
    font-size: 1em;
    width: 100%;
}
input:focus, select:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 5px rgba(52, 152, 219, 0.5);
}
input::placeholder { color: #bdc3c7; opacity: 0.8; }
label { display: block; margin-bottom: 5px; color: var(--text-color); font-size: 0.9em; font-weight: 500; }

.icon-button { background: none; border: none; font-size: 1.5em; padding: 5px; color: var(--text-color); line-height: 1; }
.icon-button:hover { color: var(--primary-color); }

.logo { display: block; margin: 20px auto; max-width: 80%; height: auto; }

/* Classes utilitárias */
.message { margin-top: 15px; font-weight: bold; text-align: center; min-height: 1.2em; }
.subtle-text { font-size: 0.85em; color: var(--text-color-subtle); text-align: center; margin-bottom: 5px; }
.disclaimer { font-size: 0.8em; color: var(--text-color-subtle); text-align: center; margin-top: 20px; }
.form-container { max-width: 400px; margin: 20px auto; padding: 20px; background-color: var(--panel-background); border-radius: 5px; }
.form-group { margin-bottom: 15px; }
.form-actions { display: flex; justify-content: space-around; margin-top: 20px; gap: 10px; }
.form-actions button { flex-basis: 45%; }


/* --- Container das Telas --- */
#screens-container {
    position: relative; /* Changed from absolute to relative */
    width: 100%;
    height: 100%; /* Fills the body */
    overflow: hidden; /* Prevent container scroll */
}

/* --- Ajuste quando a Top Bar está ativa --- */
#screens-container.with-top-bar {
    height: calc(100% - var(--top-bar-height)); /* <<< CORE FIX: Size container below top bar */
    margin-top: var(--top-bar-height); /* <<< CORE FIX: Push container down */
}

/* --- Estilo das Telas (Screens) --- */
.screen {
    position: absolute;
    top: 0; /* Positioned relative to #screens-container */
    left: 0;
    width: 100%;
    height: 100%; /* <<< CORE FIX: Fill the #screens-container */
    padding: 20px;
    /* REMOVED min-height: 1200px; */
    background-color: var(--background-color); /* Base background */
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease-in-out, visibility 0s linear 0.3s;
    z-index: 1;
    display: flex;
    flex-direction: column;
    overflow-y: auto; /* Allow internal scrolling if content overflows */
    overflow-x: hidden;
}
.screen.active {
    opacity: 1;
    visibility: visible;
    z-index: 10;
    transition: opacity 0.3s ease-in-out, visibility 0s linear 0s;
}

/* Adjust padding when top bar is active (applied within the screen) */
#screens-container.with-top-bar .screen {
     /* Padding was moved inside the screen */
     /* No height/max-height override needed here now */
}


/* --- Top Bar --- */
#top-bar {
    position: fixed; /* Keeps it at the top */
    top: 0; /* Start visible or animate from negative top */
    left: 0;
    width: 100%;
    height: var(--top-bar-height);
    background-color: rgba(10, 20, 30, 0.9);
    backdrop-filter: blur(5px);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 20px;
    z-index: 500; /* High z-index */
    transition: top 0.35s ease-in-out; /* If animating visibility */
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    /* line-height: var(--top-bar-height); /* Use align-items instead */
}
/* Keep this if you animate the top bar in */
/* #top-bar:not(.active) { top: calc(-1 * var(--top-bar-height) - 5px); } */


.top-bar-left { display: flex; align-items: center; gap: 12px; }
.top-bar-logo { height: calc(var(--top-bar-height) - 16px); width: auto; display: block; }
.top-bar-game-name { font-size: 1.6em; font-weight: bold; color: var(--text-color); white-space: nowrap; }
.top-bar-right { display: flex; align-items: center; gap: 15px; } /* Slightly less gap */
#top-bar-username { font-weight: 500; font-size: 1.0em; color: var(--text-color); white-space: nowrap; margin-right: 5px; }
#top-bar button { background: none; border: none; color: var(--text-color); font-size: 1.5em; padding: 0 5px; cursor: pointer; transition: color 0.2s ease, transform 0.2s ease; line-height: 1; }
#top-bar button:hover { color: var(--primary-color); transform: scale(1.1); }

/* --- Title Screen Layout --- */
#title-screen {
    background: url('../assets/images/ui/title_background.jpg') no-repeat center center;
    background-size: cover;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding-bottom: 5vh;
    /* REMOVED max-height: 1100px; */
}

#title-screen h1 {
    font-size: 3.5em;
    color: var(--text-color);
    text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.7);
    margin-bottom: 25px;
}

.title-logo {
    display: block;
    margin-top: -10vh; /* Adjust relative positioning */
    margin-bottom: 5vh; /* Relative spacing */
    margin-left: auto; /* Center horizontally */
    margin-right: auto;
    max-width: 450px; /* Slightly smaller max */
    width: 60%;
    height: auto;
    filter: drop-shadow(0 5px 10px rgba(0,0,0,0.4));
    position: absolute;
    margin-left: -1400px;
    margin-top: -400px;
}

.title-menu {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 25px;
    background-color: rgba(0, 0, 0, 0.2);
    padding: 15px 25px;
    border-radius: 8px;
    margin-top: 800px;
    margin-left: 1300px;
    position: absolute;
}

.title-menu button {
    min-width: 140px;
    font-size: 1.1em;
}

.title-menu #btn-goto-options-icon {
    min-width: auto;
    padding: 8px;
    font-size: 1.8em;
    background: none;
    line-height: 1;
}
.title-menu #btn-goto-options-icon:hover {
     background: none;
     color: var(--primary-color);
     transform: scale(1.1);
}

.title-footer {
    position: absolute;
    bottom: 20px; /* Closer to bottom */
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.8em;
    color: var(--text-color-subtle);
}
.title-footer a {
    color: var(--text-color-subtle);
    text-decoration: none;
    margin: 0 10px;
}
.title-footer a:hover {
    color: var(--text-color);
}

/* --- Layout da Tela de Batalha --- */
.battle-screen-layout {
    display: flex;
    flex-direction: column;
    /* height: 100%; */ /* Let .screen handle height */
    padding: 5px;
    gap: 5px;
    background: url('../assets/images/ui/battle_background.jpg') no-repeat center center fixed;
    background-size: cover;
}
/* (Rest of Battle Screen CSS remains largely the same) */
.player-area { background-color: rgba(10, 20, 30, 0.7); /* Slightly more opaque */ border: 1px solid var(--border-color); border-radius: 8px; padding: 8px; display: flex; gap: 8px; position: relative; /* max-height: 410px; */ /* Removed fixed max-height */ backdrop-filter: blur(2px); }
.player-area.opponent { flex-direction: row-reverse; flex-basis: 40%; } /* Adjusted basis */
.player-area.local-player { flex-direction: row; flex-basis: 40%; /* height: 200px; */ } /* Adjusted basis, removed fixed height */
.center-area { background-color: rgba(0,0,0, 0.5); /* Slightly more opaque */ border-radius: 5px; padding: 5px; display: flex; flex-direction: column; justify-content: space-between; align-items: center; flex-basis: 20%; min-height: 100px; /* Increased min-height */ }
.player-info { display: flex; flex-direction: column; align-items: center; justify-content: flex-start; /* Align top */ gap: 5px; flex-basis: 100px; /* Reduced basis */ flex-shrink: 0; padding: 5px; border-radius: 5px; background-color: var(--zone-background); text-align: center; }
.player-avatar img { width: 60px; /* Smaller avatar */ height: 60px; border-radius: 50%; border: 2px solid var(--primary-color); object-fit: cover; box-shadow: 0 0 5px rgba(52, 152, 219, 0.5); margin-bottom: 5px; /* Removed fixed positioning */ }
.player-stats { font-size: 0.9em; /* Slightly smaller */ width: 100%; /* Take full width of info area */ }
.player-stats span { display: block; font-weight: bold; margin-bottom: 3px; color: var(--primary-color); font-size: 1em; }
.resource { display: inline-block; margin: 1px 3px; font-weight: bold; background-color: rgba(0, 0, 0, 0.6); padding: 2px 6px; border-radius: 8px; font-size: 0.85em; white-space: nowrap; }
.resource.life { color: #e74c3c; }
.resource.mana { color: #3498db; }
.hand { flex: 1; display: flex; align-items: center; /* Center vertically */ justify-content: center; /* Center horizontally */ min-height: 70px; background: none; padding: 5px; position: relative; }
#opponent-hand { justify-content: center; background-color: var(--zone-background); border-radius: 4px; padding: 5px;}
.opponent-hand-area > span { position: absolute; top: 2px; left: 50%; transform: translateX(-50%); font-size: 0.8em; color: var(--text-color-subtle); background-color: rgba(0,0,0,0.7); padding: 1px 5px; border-radius: 3px; z-index: 1;}
.opponent-hand-display { display: flex; justify-content: center; gap: -20px; /* Overlap */ padding-top: 15px; /* Space below count */}
.opponent-hand-display .card-back { width: 50px; height: 70px; background-color: var(--secondary-color); border: 1px solid var(--border-color); border-radius: 4px; box-shadow: 1px 1px 3px rgba(0,0,0,0.4); display: inline-block; position: relative;}
.opponent-hand-display .card-back:not(:first-child) { margin-left: -35px; }
.card-zone { display: flex; flex-wrap: wrap; gap: 8px; /* Smaller gap */ padding: 8px; border-radius: 6px; background-color: var(--zone-background); min-height: calc(var(--card-height-battle) + 16px); align-content: flex-start; align-items: flex-start; }
.battlefield { flex: 3; }
.player-area.local-player .hand { /* Removed fixed min-height */ justify-content: center; background-color: var(--zone-background); border-radius: 4px; padding: 5px;}
.player-zones { position: absolute; bottom: 10px; /* Adjusted position */ display: flex; flex-direction: column; /* Stack vertically */ gap: 8px; }
.player-area.opponent .player-zones { right: 10px; }
.player-area.local-player .player-zones { right: 10px; }
.deck-zone, .graveyard-zone { position: relative; width: 70px; /* Smaller zones */ height: 100px; display: flex; flex-direction: column; align-items: center; justify-content: center; /* Center vertically */ border: 1px solid #555; background-color: rgba(0, 0, 0, 0.4); border-radius: 4px; padding: 2px; overflow: hidden; cursor: pointer; transition: border-color 0.2s ease, transform 0.2s ease; }
.deck-zone::before, .graveyard-zone::before { content: ''; position: absolute; top: 3px; left: 3px; right: 3px; bottom: 3px; border: 1px solid rgba(255,255,255,0.1); border-radius: 3px; opacity: 0.7; }
.deck-zone span, .graveyard-zone span { font-size: 0.65em; color: #ccc; text-align: center; line-height: 1; width: 100%; position: absolute; bottom: 1px; left: 0; z-index: 2; background: rgba(0,0,0,0.6); padding: 1px 0; }
.deck-zone:hover, .graveyard-zone:hover { border-color: var(--primary-color); transform: scale(1.05); }
.zone-image { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 1; border-radius: 3px; }
.deck-count, .graveyard-count { position: absolute; top: 3px; right: 3px; background-color: rgba(0, 0, 0, 0.75); color: white; border-radius: 50%; width: 18px; /* Smaller count */ height: 18px; display: flex; justify-content: center; align-items: center; font-size: 0.7em; font-weight: bold; z-index: 3; border: 1px solid #aaa; }
.graveyard-image.is-placeholder { object-fit: contain; background-color: #2a2a2a; padding: 5px;}
.game-log-container { width: 95%; max-height: 80px; /* Reduced height */ overflow-y: auto; background-color: rgba(0,0,0, 0.6); border: 1px solid var(--border-color); border-radius: 4px; margin-bottom: 5px; flex-grow: 1; }
.game-log { list-style: none; padding: 5px 8px; font-size: 0.8em; } /* Smaller font */
.game-log li { padding: 2px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1); line-height: 1.3; }
.game-log li:last-child { border-bottom: none; }
.log-damage { color: var(--accent-color); } .log-heal { color: var(--valid-color); } .log-draw { color: var(--primary-color); } .log-system { color: var(--disabled-color); font-style: italic;}
.turn-info { font-size: 0.9em; /* Slightly smaller */ margin-bottom: 5px; text-align: center; font-weight: 500; }
#phase-indicator { color: var(--highlight-color); } #current-player-indicator { font-style: italic; }
.turn-controls { display: flex; gap: 8px; justify-content: center; flex-wrap: wrap; }
.turn-controls button { padding: 5px 10px; font-size: 0.85em; }
.action-feedback-area { margin-top: 5px; font-style: italic; color: var(--highlight-color); min-height: 1.3em; text-align: center; font-weight: bold; font-size: 1em; }

/* --- Layout Deck Builder --- */
/* (Deck Builder styles remain largely the same, check for height/overflow issues if needed) */
.deck-builder-layout { display: flex; flex-direction: column; height: 100%; padding: 15px; }
.deck-builder-top-bar { display: flex; justify-content: space-between; align-items: center; padding-bottom: 15px; border-bottom: 1px solid var(--border-color); margin-bottom: 15px; flex-wrap: wrap; gap: 15px; flex-shrink: 0; }
.deck-builder-top-bar .form-group { display: flex; align-items: center; gap: 8px; margin-bottom: 0; }
.deck-builder-top-bar .form-group label { margin-bottom: 0; font-size: 1em;}
.deck-builder-top-bar .form-group input { width: auto; min-width: 200px; margin-bottom: 0; }
.deck-builder-top-bar .deck-info { font-size: 1em; display: flex; gap: 15px; }
#db-deck-validity { font-weight: bold; }
.deck-builder-top-bar .deck-actions { display: flex; gap: 10px; }
#deck-builder-message { text-align: center; min-height: 1.5em; margin-top: -10px; margin-bottom: 10px; }
.deck-builder-main-area { display: flex; flex-grow: 1; gap: 20px; overflow: hidden; } /* Added overflow:hidden */
.deck-builder-panel { flex: 1; background-color: var(--panel-background); border: 1px solid var(--border-color); border-radius: 8px; padding: 15px; display: flex; flex-direction: column; /* max-height: 840px; */ /* Remove fixed max-height */ overflow: hidden; /* Let inner elements scroll */}
.deck-builder-panel h3 { margin-bottom: 10px; text-align: left; padding-bottom: 8px; border-bottom: 1px solid var(--border-color); flex-shrink: 0;}
.filters { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; }
.filters input[type="text"] { grid-column: 1 / -1; }
.filters select { width: 100%; margin-bottom: 0; }
.card-list { flex-grow: 1; background-color: var(--zone-background); border: 1px dashed var(--border-color); border-radius: 6px; padding: 10px; display: flex; flex-wrap: wrap; gap: 8px; align-content: flex-start; overflow-y: auto; /* This scrolls */ min-height: 150px; }
.card-list.drag-over { border-color: var(--highlight-color); border-style: solid; background-color: rgba(255, 255, 0, 0.1); box-shadow: inset 0 0 10px rgba(255, 255, 0, 0.3); }
body.dragging-from-deck .deck-panel .card-list { background-color: rgba(255, 0, 0, 0.1); }
.placeholder-message { width: 100%; text-align: center; color: var(--disabled-color); font-style: italic; margin-top: 20px; font-size: 0.9em; }

/* --- Layout Profile --- */
/* (Profile styles remain largely the same, check for height/overflow issues if needed) */
.profile-layout { padding: 20px; display: flex; flex-direction: column; height: 100%; }
.profile-layout h2 { flex-shrink: 0; }
.profile-main-area { display: flex; gap: 20px; flex-grow: 1; margin-top: 20px; overflow: hidden; } /* Overflow hidden here */
.profile-left-column, .profile-right-column { flex: 1; display: flex; flex-direction: column; gap: 15px; overflow-y: auto; /* These scroll */ padding-right: 10px; }
.profile-section { background-color: var(--panel-background); border: 1px solid var(--border-color); border-radius: 8px; padding: 15px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); display: flex; flex-direction: column; /* Needed for scrollable content */}
.profile-section h3 { text-align: left; border-bottom: 1px solid var(--border-color); padding-bottom: 8px; margin-bottom: 10px; color: var(--text-color); flex-shrink: 0; }
.profile-info p { margin-bottom: 6px; font-size: 1em; }
.profile-info strong, .profile-info span { color: var(--primary-color); font-weight: 600; }
.profile-avatar-section { align-items: center; flex-shrink: 0; }
.profile-avatar-display img { width: 100px; height: 100px; border-radius: 50%; border: 3px solid var(--primary-color); margin-bottom: 10px; box-shadow: 0 0 10px rgba(52, 152, 219, 0.4); }
.avatar-choices-container { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; padding-top: 8px; }
.avatar-choice { width: 50px; height: 50px; border-radius: 50%; border: 2px solid transparent; cursor: pointer; transition: border-color 0.2s ease, transform 0.2s ease; }
.avatar-choice:hover { border-color: var(--secondary-color); transform: scale(1.08); }
.avatar-choice.selected-avatar { border-color: var(--highlight-color); box-shadow: 0 0 8px var(--highlight-color); transform: scale(1.1); }
#profile-match-history, #profile-deck-list { list-style: none; max-height: 180px; /* Adjusted max-height */ overflow-y: auto; flex-grow: 1; /* Allow list to take space */}
#profile-match-history li, #profile-deck-list li { padding: 8px 6px; border-bottom: 1px solid var(--border-color); font-size: 0.9em; display: flex; justify-content: space-between; align-items: center; transition: background-color 0.15s ease; }
#profile-match-history li:hover, #profile-deck-list li:hover { background-color: rgba(255,255,255, 0.05); }
#profile-match-history li:last-child, #profile-deck-list li:last-child { border-bottom: none; }
.deck-buttons button { padding: 2px 5px; font-size: 0.85em; margin-left: 6px; opacity: 0.7; transition: opacity 0.2s ease; }
#profile-deck-list li:hover .deck-buttons button { opacity: 1; }
.profile-decks button.button-primary { /* Specific button style */ margin-top: 10px; align-self: center; padding: 8px 15px;}
.card-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(var(--card-width-mini), 1fr)); gap: 8px; padding: 8px; overflow-y: auto; background-color: var(--zone-background); border-radius: 6px; flex-grow: 1; /* Allow grid to take space */}


/* --- Estilos para Scrollbar --- */
/* (Scrollbar styles remain the same) */
.scrollable-list::-webkit-scrollbar, .game-log-container::-webkit-scrollbar, .card-grid::-webkit-scrollbar, .profile-left-column::-webkit-scrollbar, .profile-right-column::-webkit-scrollbar, .options-container::-webkit-scrollbar, .card-list::-webkit-scrollbar, .news-feed::-webkit-scrollbar, .news-content-detail::-webkit-scrollbar { width: 8px; }
.scrollable-list::-webkit-scrollbar-track, .game-log-container::-webkit-scrollbar-track, .card-grid::-webkit-scrollbar-track, .profile-left-column::-webkit-scrollbar-track, .profile-right-column::-webkit-scrollbar-track, .options-container::-webkit-scrollbar-track, .card-list::-webkit-scrollbar-track, .news-feed::-webkit-scrollbar-track, .news-content-detail::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.2); border-radius: 4px; }
.scrollable-list::-webkit-scrollbar-thumb, .game-log-container::-webkit-scrollbar-thumb, .card-grid::-webkit-scrollbar-thumb, .profile-left-column::-webkit-scrollbar-thumb, .profile-right-column::-webkit-scrollbar-thumb, .options-container::-webkit-scrollbar-thumb, .card-list::-webkit-scrollbar-thumb, .news-feed::-webkit-scrollbar-thumb, .news-content-detail::-webkit-scrollbar-thumb { background-color: var(--secondary-color); border-radius: 4px; border: 2px solid transparent; background-clip: content-box; }
.scrollable-list::-webkit-scrollbar-thumb:hover, .game-log-container::-webkit-scrollbar-thumb:hover, .card-grid::-webkit-scrollbar-thumb:hover, .profile-left-column::-webkit-scrollbar-thumb:hover, .profile-right-column::-webkit-scrollbar-thumb:hover, .options-container::-webkit-scrollbar-thumb:hover, .card-list::-webkit-scrollbar-thumb:hover, .news-feed::-webkit-scrollbar-thumb:hover, .news-content-detail::-webkit-scrollbar-thumb:hover { background-color: var(--primary-color); }
.scrollable-list, .game-log-container, .card-grid, .profile-left-column, .profile-right-column, .options-container, .card-list, .news-feed, .news-content-detail { scrollbar-width: thin; scrollbar-color: var(--secondary-color) rgba(0,0,0,0.2); }


/* --- Estilos Básicos de Carta --- */
/* (Card styles remain largely the same) */
.card, .mini-card { border: 1px solid #1a2530; border-radius: 6px; background-color: var(--card-background); background-size: cover; background-position: center; position: relative; cursor: pointer; overflow: hidden; transition: transform 0.15s ease-out, box-shadow 0.2s ease, filter 0.2s ease; box-shadow: 2px 2px 4px rgba(0,0,0,0.3); user-select: none; -webkit-user-drag: element; }
.card:hover, .mini-card:hover { transform: scale(1.07) translateY(-3px); z-index: 50; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4); }
.sortable-ghost { opacity: 0.4; background-color: var(--primary-color) !important; }
.sortable-chosen { cursor: grabbing; }
.card { width: var(--card-width-battle); height: var(--card-height-battle); }
.mini-card { width: var(--card-width-mini); height: var(--card-height-mini); }
.mini-card .card-name-overlay { position: absolute; bottom: 0; left: 0; width: 100%; background: linear-gradient(to top, rgba(0, 0, 0, 0.9), transparent); color: white; font-size: 0.7em; padding: 4px 3px 2px 3px; text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-weight: 500; border-bottom-left-radius: 5px; border-bottom-right-radius: 5px; }
.card.tapped { transform: rotate(75deg) scale(0.90) translateX(10px) translateY(5px); transform-origin: center center; box-shadow: 1px 1px 3px rgba(0,0,0,0.3); filter: brightness(0.8); }
.card.tapped:hover { transform: rotate(75deg) scale(0.92) translateX(10px) translateY(5px); filter: brightness(0.9); }
.card.attacking { outline: 2px solid var(--accent-color); outline-offset: -2px; box-shadow: 0 0 8px var(--accent-color); }
.card.blocking { outline: 2px solid var(--primary-color); outline-offset: -2px; box-shadow: 0 0 8px var(--primary-color); }
.card.targetable { outline: 2px dashed var(--highlight-color); outline-offset: 1px; box-shadow: 0 0 10px var(--highlight-color); filter: brightness(1.1); }
.card.targetable:hover { transform: scale(1.1) translateY(-5px); }
.card.selected-attacker, .card.selected-blocker { outline: 3px solid cyan; box-shadow: 0 0 12px cyan; }
.card.cannot-act, .card.has-summoning-sickness { filter: grayscale(50%) brightness(0.8); }
.card.cannot-act:hover, .card.has-summoning-sickness:hover { transform: none; cursor: not-allowed; }

/* --- Overlays (Zoom, Game Over) --- */
/* (Overlay styles remain largely the same) */
.image-zoom-overlay, .game-over-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.88); backdrop-filter: blur(5px); display: flex; justify-content: center; align-items: center; z-index: 1000; opacity: 0; visibility: hidden; transition: opacity 0.25s ease, visibility 0s linear 0.25s; padding: 20px; }
.image-zoom-overlay.active, .game-over-overlay.active { opacity: 1; visibility: visible; transition: opacity 0.25s ease, visibility 0s linear 0s; }
#zoomed-image, #battle-zoomed-image, #deckbuilder-zoomed-image { max-width: 90%; max-height: 90%; width: auto; height: auto; min-width: 300px; object-fit: contain; border: 3px solid var(--border-color); border-radius: 10px; box-shadow: 0 0 20px rgba(0,0,0,0.4); }
.game-over-overlay div { background-color: var(--background-color); padding: 35px 50px; border-radius: 10px; border: 2px solid var(--primary-color); text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.25); }
#game-over-message { font-size: 2em; margin-bottom: 20px; font-weight: bold; }
#btn-back-to-profile { font-size: 1.05em; padding: 10px 20px; }

/* --- Splash Screen --- */
/* (Splash screen styles remain largely the same) */
#splash-screen {
    justify-content: flex-end;
    align-items: center;
    text-align: center;
    width: 100%;
    /* height: 100%; REMOVED fixed height */
    z-index: 9999;
    padding: 0;
    margin: 0;
    overflow: hidden;
    background: url('../assets/images/ui/SplashCreenLogo.png') no-repeat center center;
    background-size: cover;
    position: absolute; /* Keep absolute for layering */
    top: 0; left: 0; /* Ensure it covers */
}
.splash-content { width: 100%; position: absolute; bottom: 30px; /* Adjusted position */ left: 0; padding: 20px; display: flex; justify-content: center; }
.splash-message { font-size: 1.05em; font-weight: bold; color: var(--text-color); background-color: rgba(0, 0, 0, 0.65); padding: 5px 18px; border-radius: 5px; position: relative; overflow: hidden; width: 65%; max-width: 450px; text-align: center; z-index: 2; margin: 0; }
.splash-message::before { content: ''; position: absolute; top: 0; left: 0; bottom: 0; width: 0%; background-color: #a00030; /* Darker red */ z-index: -1; border-radius: 5px; transition: width 2.8s linear; }
#splash-screen.loading .splash-message::before { width: 100%; }

/* --- Outros Estilos Específicos --- */
/* (Options, Connect, Login, Create Account, Shake, Drag Removal styles remain largely the same) */
.options-layout { align-items: center; padding-top: 30px; }
.options-container { max-width: 600px; width: 95%; overflow-y: auto; padding: 20px; background: var(--panel-background); border-radius: 8px; margin-bottom: 20px; border: 1px solid var(--border-color); }
.options-group { border: 1px solid var(--border-color); border-radius: 5px; padding: 15px 20px; margin-bottom: 20px; }
.options-group legend { padding: 0 10px; font-weight: bold; color: var(--primary-color); font-size: 1.1em; }
.option-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; gap: 15px; flex-wrap: wrap; /* Allow wrap */}
.option-item label { flex-basis: 40%; /* Adjusted basis */ min-width: 120px; /* Min width for label */ margin-bottom: 0; flex-shrink: 0; text-align: right; padding-right: 5px;}
.option-item input[type="range"] { flex-grow: 1; min-width: 150px; /* Min width for slider */ margin: 0; }
.option-item input[type="checkbox"] { width: 18px; height: 18px; flex-shrink: 0; cursor: pointer; }
.option-item select { width: auto; flex-grow: 1; min-width: 150px; }
.volume-value { min-width: 40px; text-align: right; font-size: 0.9em; }
.options-actions { margin-top: 10px;}

.connect-layout { align-items: center; padding-top: 5vh; background: url('../assets/images/ui/connect_background.jpg') no-repeat center center; background-size: cover;}
.connect-logo{ display: block; margin-top: -5vh; margin-bottom: 2vh; margin-left: auto; margin-right: auto; max-width: 300px; width: 60%; height: auto; filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.4));}
.connect-options { display: flex; gap: 25px; margin-top: 3vh; justify-content: center; width: 100%; max-width: 650px; flex-wrap: wrap; }
.connect-section { flex: 1; min-width: 250px; background: var(--panel-background); padding: 20px; border-radius: 8px; text-align: center; border: 1px solid var(--border-color); }
.connect-section h3 { margin-bottom: 15px; text-transform: uppercase; font-weight: bold;}
.connect-host, .connect-join { display: block; margin: 5px auto 15px auto; max-width: 80px; height: auto; filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.4));}
#server-status-section .form-actions, #join-game-section .form-actions { justify-content: center; }
.connect-actions { margin-top: 3vh; }

#login-screen { background: url('../assets/images/ui/login_background.jpg') no-repeat center center; background-size: cover; justify-content: center; align-items: center; text-align: center; padding: 20px; }
.login-logo{ display: block; margin-top: -500px; margin-left: 1300px; position: absolute; max-width: 400px; width: 65%; height: auto; filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.4));}
#login-screen h2 { color: var(--text-color); text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.6); position: absolute; margin-top: 325px; font-size: 2.5em; }
#login-screen .form-container { margin-top: 700px; position: absolute; width: 100%; max-width: 400px; background-color: rgba(10, 20, 30, 0.85); border: 1px solid var(--border-color); box-shadow: 0 5px 15px rgba(0,0,0,0.3); padding: 25px; }
#login-screen .form-container label { text-align: left; font-size: 0.95em; }
#login-screen .form-container .form-actions { gap: 15px; }
#login-screen .form-container .form-actions button { font-size: 1em; padding: 10px 15px; }
#login-message { margin-top: 18px; font-size: 1em; }

#create-account-screen { background: url('../assets/images/ui/create_account_background.jpg') no-repeat center center; background-size: cover; justify-content: center; align-items: center; text-align: center; padding: 20px; }
.create-account-logo{ display: block; margin-left: -1400px; margin-top: -500px; position: absolute; max-width: 400px; width: 65%; height: auto; filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.4));}
#create-account-screen h2 { color: var(--text-color); text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.6); margin-bottom: 20px; font-size: 2em; position: absolute; margin-top: 300px; margin-left: 1381px;}
#create-account-screen .form-container { position: absolute; margin-left: 1400px; margin-top: 700px; width: 100%; max-width: 400px; background-color: rgba(10, 20, 30, 0.85); border: 1px solid var(--border-color); box-shadow: 0 5px 15px rgba(0,0,0,0.3); padding: 25px; }
#create-account-screen .form-container label { text-align: left; font-size: 0.95em; }
#create-account-screen .form-container .form-actions { gap: 15px; }
#create-account-screen .form-container .form-actions button { font-size: 1em; padding: 10px 15px; }
#create-account-message { margin-top: 15px; font-size: 1em; min-height: 1.3em; }
#create-account-screen .disclaimer { margin-top: 15px; max-width: 400px; width: 90%; margin-left: auto; margin-right: auto; }

@keyframes shake { 0%, 100% { transform: translateX(0); } 10%, 30%, 50%, 70%, 90% { transform: translateX(-7px); } 20%, 40%, 60%, 80% { transform: translateX(7px); } }
.form-shake { animation: shake 0.5s ease-in-out 1; }
.card-list.drag-removal { border: 2px solid var(--error-color, red) !important; background-color: rgba(255, 0, 0, 0.1) !important; }

/*-----------------------------*/
/* 7. Home Screen (News Feed)  */
/*-----------------------------*/
/* (Home Screen styles remain largely the same) */
.home-layout { display: flex; flex-direction: column; align-items: center; padding: 20px; padding-bottom: 80px; box-sizing: border-box; position: relative; height: 100%; /* Use container height */ overflow: hidden; }
.home-layout h2 { margin-bottom: 20px; color: var(--title-color); text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7); flex-shrink: 0; }
.home-content-area { width: 95%; max-width: 900px; flex-grow: 1; /* Takes remaining height */ position: relative; background-color: rgba(0, 0, 0, 0.35); border-radius: 8px; box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5); overflow: hidden; margin-bottom: 10px; /* Space above play button */}
.news-feed { padding: 15px; height: 100%; overflow-y: auto; }
.news-item { background-color: rgba(255, 255, 255, 0.08); border: 1px solid var(--border-color-light); border-radius: 6px; margin-bottom: 15px; padding: 10px 15px; display: flex; gap: 15px; cursor: pointer; transition: background-color 0.2s ease, transform 0.1s ease; }
.news-item:hover { background-color: rgba(255, 255, 255, 0.15); transform: translateY(-2px); border-color: var(--accent-color); }
.news-image-summary { width: 100px; height: 60px; object-fit: cover; border-radius: 4px; align-self: center; flex-shrink: 0; }
.news-item-content { flex-grow: 1; display: flex; flex-direction: column; }
.news-item-header { display: flex; justify-content: space-between; align-items: baseline; flex-wrap: wrap; margin-bottom: 5px; }
.news-title-summary { margin: 0; font-size: 1.1em; color: var(--accent-color-light); flex-basis: 60%; }
.news-date { font-size: 0.8em; color: var(--text-color-subtle); white-space: nowrap; }
.news-category { font-weight: bold; margin-left: 5px; color: var(--accent-color); }
.news-summary { font-size: 0.9em; margin: 0; color: var(--text-color-secondary); line-height: 1.4; }
.news-detail-view { padding: 20px; height: 100%; display: flex; flex-direction: column; box-sizing: border-box; }
.button-back { align-self: flex-start; margin-bottom: 15px; background: var(--button-secondary-bg); border: 1px solid var(--border-color); padding: 5px 10px; font-size: 0.9em; flex-shrink: 0; }
.button-back:hover { background: var(--button-secondary-hover-bg); }
#news-detail-title { text-align: center; margin-bottom: 15px; color: var(--title-color); flex-shrink: 0; }
.news-image-detail { max-width: 80%; max-height: 200px; /* Reduced max height */ object-fit: contain; display: block; margin: 0 auto 15px auto; border-radius: 5px; flex-shrink: 0; }
.news-content-detail { flex-grow: 1; overflow-y: auto; line-height: 1.6; color: var(--text-color); padding-right: 10px; }
.news-content-detail p { margin-bottom: 1em; }
.news-content-detail ul { list-style: disc; margin-left: 25px; margin-bottom: 1em;}
.news-content-detail li { margin-bottom: 0.5em; }
.news-content-detail strong { color: var(--accent-color-light); }
.news-content-detail em { color: var(--text-color-secondary); }
.button-play { position: absolute; bottom: 15px; right: 15px; padding: 10px 20px; font-size: 1.1em; font-weight: bold; background-color: var(--button-play-bg); color: var(--button-play-text); border: 1px solid var(--button-play-border); border-radius: 5px; cursor: pointer; transition: background-color 0.2s ease, transform 0.1s ease; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.4); z-index: 10; }
.button-play:hover { background-color: var(--button-play-hover-bg); transform: scale(1.03); }
.button-play:active { transform: scale(0.98); }
.placeholder-message { text-align: center; color: var(--text-color-subtle); padding: 20px; font-style: italic; }
.error-message { text-align: center; color: var(--error-color); padding: 20px; font-weight: bold; }

/* --- Screen Transition Classes (Add if not in animations.css) --- */
.screen-fade-out {
    opacity: 0 !important;
    transition: opacity 0.3s ease-in-out;
}
.screen-prepare-fade-in {
    opacity: 0 !important; /* Start invisible */
    visibility: visible !important; /* But technically visible for transition */
    z-index: 9; /* Below current active during fade out */
}
.screen-fade-in {
    opacity: 1 !important;
    transition: opacity 0.3s ease-in-out;
    z-index: 10; /* Ensure it's on top */
}